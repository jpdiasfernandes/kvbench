- name: Clone kvbench
  git:
    repo: "https://github.com/jpdiasfernandes/kvbench.git"
    dest: "{{ kvbench_dir }}"
    version: main

- name: Ensure ~/.ansible/plugins/modules exists
  file:
    path: "~/.ansible/plugins/modules"
    state: directory

- name: Copy util plot_energy module to ansible path
  copy:
    src: "{{ kvbench_dir }}/utils/plot_energy.py"
    dest: "~/.ansible/plugins/modules/plot_energy.py"
    remote_src: yes

- name: Copy util log_summary_info module to ansible path
  copy:
    src: "{{ kvbench_dir }}/utils/log_summary_info.py"
    dest: "~/.ansible/plugins/modules/log_summary_info.py"
    remote_src: yes

- name: Copy utils scripts to utils path
  copy:
    src: "{{ kvbench_dir }}/utils/"
    dest: "{{ utils_dir }}/"
    remote_src: yes
